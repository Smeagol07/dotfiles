#!/bin/bash

# if something is archive, then it should not be inbox nor sent
notmuch tag -inbox -sent -- tag:archive
# move mails with archive tag to archvie imap catalog
# but only if they are in inbox or sent, other are in archive
# already (at least on gmail, but that one actually make sense).
notmuch search --output=files tag:archive |grep '/INBOX/\|/sent/' |while read line;do mv "$line" "`echo $line | sed 's#Maildir/\(.*\)/\(.*\)/cur#Maildir/\1/archive/cur#'`" 2>&1 > /dev/null ;done;
