# IMAP: offlineimap
set folder = "`echo $HOME`/Maildir"
source ~/.mutt/mailboxes
set mailcap_path=~/.mutt/mailcap
set sort=threads
# source ~/.mutt/accounts

# Sidebar
set sidebar_visible = yes
# Ctrl-n, Ctrl-p to select next, previous folder.
# Ctrl-o to open selected folder.
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

# wrap settings
set smart_wrap
set wrap=100 # 20 ish is for sidebar
set markers=no

# notmuch
set nm_default_uri="notmuch://`echo $HOME`/Maildir" # path to the maildir
set virtual_spoolfile=yes                          # enable virtual folders
#set sendmail="/PATH/TO/bin/nm_sendmail"            # enables parsing of outgoing mail
virtual-mailboxes \
    "Inbox"     "notmuch://?query=tag:inbox and NOT tag:archive"\
    "Threads"   "notmuch://?query=(tag:sent or tag:inbox) and NOT tag:archive"\
    "Unread"    "notmuch://?query=tag:unread"\
    "Starred"   "notmuch://?query=tag:*"\
    "Sent"      "notmuch://?query=tag:sent"\
    "Todo"      "notmuch://?query=tag:todo and NOT tag:done"\
    "Drafts"    "notmuch://?query=tag:drafts"\
    "Archive"   "notmuch://?query=tag:archive" # sets up queries for

# notmuch bindings
macro pager,index \\\\ "<vfolder-from-query>"              # looks up a hand made query
macro index A "<modify-labels-then-hide>+archive -unread -inbox\n<sync-mailbox>"        # tag as Archived
macro index T "<modify-labels>+todo\n"
#macro index I "<modify-labels>-inbox -unread\\n"                 # removed from inbox
#macro index S "<modify-labels-then-hide>-inbox -unread +junk\\n" # tag as Junk mail
macro index + "<modify-labels>+*\\n<sync-mailbox>"               # tag as starred
macro index - "<modify-labels>-*\\n<sync-mailbox>"               # tag as unstarred

# quick jump between boxes
macro index gi "<change-vfolder> Inbox<enter>" "Go to Inbox"
macro index ga "<change-vfolder> Archive<enter>" "Go to Archive"
macro index gs "<change-vfolder> Sent<enter>" "Go to Sent Mail"
macro index gd "<change-vfolder> Drafts<enter>" "Go to Drafts"
macro index gt "<change-vfolder> Todo<enter>" "Go to Drafts"

auto_view text/html                                      # view html automatically
auto_view text/calendar                                  # view ics automatically
alternative_order text/plain text/enriched text/html     # save html for last

# theme
source ~/.mutt/solarized-dark-16.muttrc
